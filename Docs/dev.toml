[mysql]
    # 当你的服务加入 nfx-stack 网络时可以直接用容器名 + 内部端口
    # 如果是在宿主机/本地开发访问，请改成 192.168.1.64:10013（NFX-Stack README 中有端口表）
    host = "mysql"
    port = 3306
    user = "root"
    password = "<MYSQL_ROOT_PASSWORD>"       # 来自 NFX-Stack/.env
    dbname = "<MYSQL_DATABASE_NAME>"         # 每个项目自定义数据库名
    charset = "utf8mb4"
    parse_time = true
    loc = "Local"
    logger_level = "warn"
    auto_migrate = false

    [mysql.connection]
        timeout = "5s"
        max_retries = 5
        retry_interval = "2s"
        max_idle_connections = 10
        max_open_connections = 100
        conn_max_idle_time = "15m"
        conn_max_lifetime = "1h"

[postgresql]
    host = "postgresql"
    port = 5432
    user = "postgres"
    password = "<POSTGRES_ROOT_PASSWORD>"
    dbname = "<POSTGRES_DATABASE_NAME>"
    sslmode = "disable"
    timezone = "UTC"
    logger_level = "warn"
    auto_migrate = false

    [postgresql.connection]
        timeout = "5s"
        max_retries = 5
        retry_interval = "2s"
        max_idle_connections = 10
        max_open_connections = 100
        conn_max_idle_time = "15m"
        conn_max_lifetime = "1h"

[cache]
    host = "redis"  # 外部访问请切换为 192.168.1.64，端口 10015
    port = 6379
    password = "<REDIS_PASSWORD>"
    db = 0

    [cache.connection]
        dial_timeout = "3s"
        write_timeout = "3s"
        read_timeout = "3s"
        max_retries = 5
        retry_interval = "2s"

[kafka]
    brokers = ["kafka:9092"]  # 外部访问改为 ["192.168.1.64:10109"]
    client_id = "sjgz-catalog"

    [kafka.network]
        max_open_requests = 1

    [kafka.producer]
        acks = "all"
        compression = "snappy"
        retries = 3
        batch_bytes = 1048576
        linger_ms = 5
        idempotent = true

    [kafka.consumer]
        group_id = "catalog-service-group"
        initial_offset = "latest"
        session_timeout_ms = 10000
        heartbeat_interval_ms = 3000
        fetch_min_bytes = 1
        fetch_max_bytes = 5242880

    # Catalog 服务发布的事件 (Producer Topics)
    [kafka.producer_topics]
        catalog = "sjgz.catalog"
        catalog_poison = "sjgz.catalog_poison"
        user = "sjgz.user"
        image = "sjgz.image"

    # Catalog 服务监听的事件 (Consumer Topics)
    [kafka.consumer_topics]
        catalog = "sjgz.catalog"
        catalog_poison = "sjgz.catalog_poison"

    [kafka.security]
        enabled = false
        mechanism = "PLAIN"
        username = ""
        password = ""
        tls_insecure_skip_verify = false

[mongodb]
    host = "mongodb"   # 或 192.168.1.64
    port = 27017       # 或 10014
    username = "<MONGO_ROOT_USERNAME>"
    password = "<MONGO_ROOT_PASSWORD>"
    database = "<MONGO_DATABASE>"
    auth_source = "admin"

[minio]
    endpoint  = "${MINIO_ENDPOINT}" 
    access_key = "${MINIO_ACCESS_KEY}"  # 例如：x0uKDUj29EV6loGKGoI9
    secret_key = "${MINIO_SECRET_KEY}"  # 例如：vDnc3BIaaBBHXSxrMKxmPHpZwUGcWQ6YqsGP4KHz
    region = "us-east-1"  # 默认固定写这个，不影响本地使用